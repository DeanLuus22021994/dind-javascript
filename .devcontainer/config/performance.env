# Performance Optimization Configuration
# This file contains various performance tuning settings for the development environment

# Docker Daemon Configuration
# /etc/docker/daemon.json equivalent settings (handled in Dockerfile)
DOCKER_STORAGE_DRIVER=overlay2
DOCKER_LOG_DRIVER=json-file
DOCKER_LOG_MAX_SIZE=10m
DOCKER_LOG_MAX_FILE=3

# BuildKit Configuration
BUILDKIT_CACHE_MOUNT_TYPE=tmpfs
BUILDKIT_CACHE_SIZE=1G
BUILDKIT_WORKERS=auto
BUILDKIT_GC_ENABLED=true
BUILDKIT_GC_KEEP_DURATION=24h

# Node.js Performance
NODE_OPTIONS="--max-old-space-size=2048 --experimental-worker"
UV_THREADPOOL_SIZE=8
NODE_ENV=development

# npm/Yarn Configuration
NPM_CONFIG_PROGRESS=false
NPM_CONFIG_AUDIT=false
NPM_CONFIG_FUND=false
NPM_CONFIG_UPDATE_NOTIFIER=false
YARN_CACHE_FOLDER=/cache/yarn
YARN_ENABLE_TELEMETRY=0

# Redis Performance
REDIS_MAXMEMORY=256mb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_SAVE_INTERVAL=900 1
REDIS_TCP_KEEPALIVE=300

# PostgreSQL Performance
POSTGRES_SHARED_BUFFERS=128MB
POSTGRES_EFFECTIVE_CACHE_SIZE=256MB
POSTGRES_WORK_MEM=4MB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9
POSTGRES_WAL_BUFFERS=16MB

# Container Resource Limits
CONTAINER_MEMORY_LIMIT=4g
CONTAINER_CPU_LIMIT=2
CONTAINER_SWAP_LIMIT=2g

# Network Performance
DOCKER_NETWORK_MTU=1500
DOCKER_BRIDGE_NAME=dind-br0
DOCKER_SUBNET=192.168.100.0/24

# File System Performance
TMPFS_SIZE=1g
CACHE_DIR_PERMISSIONS=755
WORKSPACE_MOUNT_TYPE=cached

# Development Tools Performance
ESLINT_USE_FLAT_CONFIG=false
TYPESCRIPT_INCREMENTAL=true
JEST_WORKERS=50%
WEBPACK_CACHE=true
VITE_CACHE_DIR=/cache/vite

# VS Code Performance
VSCODE_EXTENSIONS_CACHE=/home/vscode/.vscode-server/extensions
VSCODE_SETTINGS_SYNC=false
VSCODE_TELEMETRY_DISABLED=true

# Git Performance
GIT_CONFIG_CORE_PRELOADINDEX=true
GIT_CONFIG_CORE_FSCACHE=true
GIT_CONFIG_GC_AUTO=256

# Shell Performance
BASH_COMPLETION_COMPAT_DIR=/usr/share/bash-completion/completions
HISTSIZE=10000
HISTFILESIZE=20000
HISTCONTROL=ignoreboth

# Monitoring and Logging
LOG_LEVEL=info
DEBUG_ENABLED=false
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30s

# Cache Strategies
CACHE_STRATEGY=aggressive
CACHE_TTL=3600
CACHE_MAX_SIZE=1g

# Parallel Processing
PARALLEL_JOBS=auto
MAX_CONCURRENT_BUILDS=4
MAX_CONCURRENT_TESTS=4

# Development Flags
HOT_RELOAD_ENABLED=true
SOURCE_MAPS_ENABLED=true
MINIFICATION_ENABLED=false
COMPRESSION_ENABLED=false
